(function(p){var r=window.AmazonUIPageJS||window.P,t=r._namespace||r.attributeErrors,d=t?t("DetailPageTwisterViewAsset",""):r;d.guardFatal?d.guardFatal(p)(d,window):d.execute(function(){p(d,window)})})(function(p,r,t){p.when("A","dp-refresh-handler","view-util","twister-string-constants","twister-dimension-subview-promise-handler").register("page-refresh-view",function(d,E,l,m,e){function h(e,h,t){function n(b){return{chunk:function(c){var f=c.ASIN,b=c.Value;c=c.FeatureName;if(!k.hiddenFeatures[c]){var a=
c,g,e;try{a&&b&&b.content&&(e=b.content[a],"undefined"!==typeof e&&(g=q("#"+a),g.html(e),g.css({opacity:""})))}catch(u){a=a||"NoFeatureName",z.logFatal(u,{message:"Error in feature"+a})}k.twisterRefreshHandler.stampFeature(a,f);"twister-slot-price_feature_div"==c&&(f=b?b.content:null,g=q(".swatchSelect .twisterSwatchPrice").html(),b=q(".swatchSelect .price_slot_ppu").html(),g&&f&&f.priceToSet&&(g=d.trim(g),f.priceToSet!==g&&(q(".swatchSelect .twisterSwatchPrice").html(f.priceToSet),w("twisterUpdatePriceMismatch"))),
b&&f&&f.hasPricePerUnit&&f.pricePerUnitDisplay&&(b=d.trim(b),f.pricePerUnitDisplay!==b&&(q(".swatchSelect .price_slot_ppu").html(f.pricePerUnitDisplay),w("twisterUpdatePricePerUnitMismatch"))))}},success:function(b,f,k){w("twisterUpdateSuccess")},error:function(b,f,k){Twister.$("#variations-overlay").hide();w("twisterUpdateFailure");Twister.showErrorMessageOnFailure&&(alert(Twister.errorMessageOnFailure),location.reload())},abort:function(b){z.logFatal("Ajax aborted: "+b)},timeout:4E4}}function x(b,
c,f,k,a){var g=[];"parent"===b?(c=v(c,k,"parent",a),g.parent=c,c=v(f,k,"partial",a),g.partial=c):(c=v(f,k,b,a),g[b]=c);return g}function A(b,c,f,e,a){for(var g in b)if(b.hasOwnProperty(g)){if("full"===g){var n=f.dimensionType,m=k.twisterUtil.getDimensionInfo().length,h=f.dimensionDisplayType,l=f.newAsin,v=a&&(d.state("dp-twister-csm")||{}).updateCSMPageTypeId;k.twisterRefreshHandler.startMeasurement(l,n,m,h,v?l:void 0,v?["is-twister","parentAsin-"+B]:void 0)}n=b[g].twisterRefreshParams;m=b[g].notifyClientParams;
a&&(q(k.config[g].affectedFeatures).css({opacity:.5}),k.twisterRefreshHandler.doPageRefresh(null,n,c,e));u(m.asin,m.id,g,a)}}function H(){q.each(h.contextMetaData,function(b,c){var f={};c=c.elementList||[];var e=c.length,a=[];f.click={};f.mouseOver={};for(var g=0;g<e;g++){var d=q("#"+c[g].divToUpdate);a.push("#"+c[g].divToUpdate);d.length&&c[g].customClientFunction&&(c[g].updateOnHover&&(f.mouseOver[c[g].divToUpdate]=d.attr("customfunctionname")),f.click[c[g].divToUpdate]=d.attr("customfunctionname"))}k.config[b].affectedFeatures=
a.join(",");k.config[b].clientFeatures=f})}function u(b,c,f,d){var a="",a=d?m.EVENT_TYPE_CLICK:m.EVENT_TYPE_MOUSEOVER;q.each(k.config[f].clientFeatures[a],function(a,f){try{var d=function(){k.twisterRefreshHandler.stampImageLoad(b)};(function(){var a={};a.P=p;(function(){eval("var P \x3d this.P;");eval("0, "+f)(c,DetailPage.StateController,d)}).call(a)})()}catch(e){z.logFatal("Client feature - "+a+", threw and exception :- "+e)}})}function v(b,c,f,e){var a={},g={};a.asinList=b;a.id="parent"===f?b:
"partial"===e?c:b;a.mType=f;a=I(f,a);f=!1;(e=d.state("pwState"))&&(f=e.isTryState);f&&(a.isTryState=f);a=k.twisterRefreshHandler.createCustomParamsMap({},a);g.asin=b;g.id=c;return{twisterRefreshParams:a,notifyClientParams:g}}function I(b,c){q.each(h.contextMetaData[b].mTypeSpecificURLParams,function(b,e){c[b]=e});return c}function J(b){b=k.twisterUtil.getSelectionInfoFromSelectedVariationValuesMap(b.selected_variation_values);k.twisterUtil.isFullySelected(b)?k.currentPageSelectionState="full":k.currentPageSelectionState=
"partial"}function K(b){var c={};c.config=b.measurement;c.dimensionDisplayType=b.dimensionsDisplayType;c.storeID=b.storeID;c.productGroupID=b.productGroupID;return c}function L(b){b=b.immutableURLPrefix;var c=null;b.includes("?")&&(b=b.split("?")[1],0<b.length&&(c={},b=b.split("\x26"),d.each(b,function(b){b=b.split("\x3d");c[b[0]]=b[1]})),c.isFlushing=2,c.dpEnvironment=Twister.dpEnvironment);return c}function C(b,c){var f;"partial"===b&&"partial"===c&&(f="partial");"partial"===b&&"full"===c&&(f="full");
"full"===b&&"partial"===c&&(f="parent");"full"===b&&"full"===c&&(f="full");return f}var k=this,B=h.parent_asin,y=r.ue,D="",z=new t("dpTwisterPageRefreshView");this.twisterUtil=e.util;this.twisterFeatureName="Twister";this.currentPageSelectionState;this.twisterRefreshHandler;this.config={partial:{},full:{},parent:{},master:{}};this.hiddenFeatures={intermediateEOS:1,EOS:1};k.viewUtil=new l(e);k.subType;var w=function(b){y&&y.count&&y.count(b,(y.count(b)||0)+1)};(function(){J(h);H();var b={featureName:k.twisterFeatureName},
c=K(h);k.twisterRefreshHandler=new E(b,null,c);b=L(h.twisterUpdateURLInfo);k.twisterRefreshHandler.addParams(b);e.registerPassive({viewAttribution:"DetailPage",viewName:"WebTwisterRefreshView"},{updateView:function(b,c){var a={};if(b!==m.METADATA){var a={},g;g=void 0;if(c)switch(b){case m.VARIATION_CHANGE:g=c.selected().selInfo;break;case m.VARIATION_PEEK:g=c.peek().selInfo}a.selectionInfo=g;a.dimensionCombination=k.viewUtil.getCurrDimCombId(a.selectionInfo,"_","X");g=k.twisterUtil.isFullySelected(a.dimensionCombination);
a.childAsin=k.twisterUtil.getAsinFromSelectionInfo(a.selectionInfo,g);a.newPageSelectionState=g?"full":"partial";a.mTypeForRefresh=C(k.currentPageSelectionState,a.newPageSelectionState);a.newAsin="parent"===a.mTypeForRefresh?B:a.childAsin;a.doNotAbort="parent"===a.mTypeForRefresh?!0:!1;a.twisterCallListParams=x(a.mTypeForRefresh,a.newAsin,a.childAsin,a.dimensionCombination,a.newPageSelectionState);a.optionsForTwisterRefresh=n(c);a.pageRefreshMeasure={newAsin:a.newAsin,dimensionType:D,dimensionDisplayType:h.dimensionsDisplayType}}switch(b){case m.VARIATION_CHANGE:k.subType!==
m.PRODUCTIZED_VIEW_SUBTYPE&&(A(a.twisterCallListParams,a.optionsForTwisterRefresh,a.pageRefreshMeasure,a.doNotAbort,!0),k.currentPageSelectionState=a.newPageSelectionState,k.subType=void 0);break;case m.METADATA:switch(c.subType){case m.DP_STATE_VIEW_SUBTYPE:D=c.divMetadata.dimDisplayType;break;case m.PRODUCTIZED_VIEW_SUBTYPE:k.subType=c.subType,a.dimensionCombination=c.newDimCombID,a.childAsin=c.childAsin,a.newAsin=c.newAsin,a.newPageSelectionState=k.twisterUtil.isFullySelected(a.dimensionCombination)?
"full":"partial",a.mTypeForRefresh=C(k.currentPageSelectionState,a.newPageSelectionState),a.doNotAbort="parent"===a.mTypeForRefresh?!0:!1,a.twisterCallListParams=x(a.mTypeForRefresh,a.newAsin,a.childAsin,a.dimensionCombination,a.newPageSelectionState),a.optionsForTwisterRefresh=n(c),a.pageRefreshMeasure={newAsin:a.newAsin,dimensionType:c.divMetaData?c.divMetaData.dimDisplayType:void 0,dimensionDisplayType:h.dimensionsDisplayType},A(a.twisterCallListParams,a.optionsForTwisterRefresh,a.pageRefreshMeasure,
a.doNotAbort,!0),k.currentPageSelectionState=a.newPageSelectionState}}}})})()}var q=d.$;e.registerDimensionSubView("page-refresh-view",h);return h});p.when("A").register("twister-common-constants",function(d){return{FAMILY_SIZE_BUCKET_LIMITS:[0,3,8,25,50,100,1E3,5E3],DEFAULT_SELECTION_TAG:"defaultSelection",BottomSheet:{TRIGGERING_CRITERION_BOTTOMSHEET_OPEN:"onBottomsheetOpen",BOTTOM_SHEET_SELECTOR:"#twister_bottom_sheet",OVERFLOW_THRESHOLD:8,BOTTOM_SHEET_INIT_TIME:"dpBottomSheetInitTime",PREFETCH_AJAX_CALLS_COMPLETED_EVENT:"prefetchAjaxCallsCompleted"},
SortingFiltering:{PRICE_SORT_TOGGLE_SWITCH_CLICK_ON_METRIC:"DPBottomSheetSortingToggleSwitchClickOn",PRICE_SORT_TOGGLE_SWITCH_CLICK_OFF_METRIC:"DPBottomSheetSortingToggleSwitchClickOff",PRICE_SORT_TOGGLE_SWITCH_ENABLED_STATUS_METRIC:"DPBottomSheetPriceSortingToggleSwitchEnabledStatus",PRIME_FILTER_TOGGLE_SWITCH_CLICK_ON_METRIC:"DPBottomSheetPrimeFilteringToggleSwitchClickOn",PRIME_FILTER_TOGGLE_SWITCH_CLICK_OFF_METRIC:"DPBottomSheetPrimeFilteringToggleSwitchClickOff",PRIME_FILTER_TOGGLE_SWITCH_ENABLED_STATUS_METRIC:"DPBottomSheetPrimeFilteringToggleSwitchEnabledStatus",
SORTING_TYPE_PRICE:"price",SORTING_TYPE_UNSORTED:"unsorted",PREFETCH_AJAX_CALLS_COMPLETED_EVENT:"prefetchAjaxCallsCompleted",TOGGLE_SWITCH_STATE_OFF:"off",TOGGLE_SWITCH_STATE_ON:"on",PRICE_SORTING_ENABLED_PARAMETER:"priceSortingEnabled",PRICE_SORTING_PRIORITY_NAME_PARAMETER:"priceSortingPriorityName",ALTER_TYPE_NAME_PRICE:"price",ALTER_TYPE_NAME_PRIME:"prime",ALTER_SUB_TYPE_ENABLE:"enable",ALTER_SUB_TYPE_DISABLE:"disable",ALTER_TYPE_SORT:"sort",ALTER_TYPE_FILTER:"filter",PRICE_SORT_TOGGLE_SWITCH_SELECTOR:".priceSortToggleSwitch",
PRIME_FILTER_TOGGLE_SWITCH_SELECTOR:".primeFilterToggleSwitch",EXPERIMENT_PRICE_SORTING:"priceSorting",EXPERIMENT_PRIME_FILTERING:"primeFiltering",ATTRIBUTE_PRICE_SORTING_PRIORITY:"priorityName",ATTRIBUTE_SORT_BY_PRICE_STRING:"sortByPriceString",ATTRIBUTE_SORTED_BY_PRICE_STRING:"sortedByPriceString",ATTRIBUTE_TOOL_NAME:"toolName",TOOL_TYPE_TOGGLE_SWITCH:"toggleSwitch"}}});"use strict";p.when("A","twister-util","ready").execute(function(d,p){var l=r.ue;if(void 0!==d.state("dimensionKeyList"))for(var m in d.state("dimensionKeyList").dimensionKeys)void 0!==
m&&(d.on("a:popover:beforeShow:mobile-twister_"+m,function(e){void 0===d.state("twisterInteractability")&&l&&"function"===typeof l.count&&l.count("Twister:blankTwisterSecView",(l.count("Twister:blankTwisterSecView")||0)+1)}),d.on("a:popover:beforeHide:mobile-twister_"+m,function(e){if(e&&e.popover){e=e.popover.getContent();var d=0<e.find(".aw-twister-row:first").length;e&&!d&&l&&"function"===typeof l.count&&l.count("blankTwisterSecondaryView",(l.count("blankTwisterSecondaryView")||0)+1)}}))});"use strict";
p.when("A").register("twister-bottom-sheet-container",function(d){return{getInstance:function(){return this.sheetViewInstance},saveInstance:function(p){this.sheetViewInstance=p;d.trigger("dp:sheet:twister:initialized")}}});"use strict";p.when("A","a-sheet","jQuery","ready").execute(function(d,p,l){d.on("a:sheet:afterShow:bottom_sheet_mediaMatrix",function(){var d=l("#mediaMatrix_bottomSheet_view_div").find("#format-picker-scroller"),e=d.find("#selected-format"),h=e.offset().left,q=Math.abs(e.width()),
e=Math.max(document.documentElement.clientWidth,r.innerWidth||0),q=e-q,p=d.scrollLeft();(h>q||0>=h)&&d.scrollLeft(p+h-e/3)})});p.when("A","view-util","twister-string-constants").register("hover-refresh-view",function(d,r,l){var m=d.$;return function(e,h,q){function t(){d.each(h.contextMetaData,function(d,e){var u={};d=d.elementList||[];var l=d.length;u.mouseOver=[];for(var m=0;m<l;m++)d[m].customClientFunction&&d[m].updateOnHover&&u.mouseOver.push(d[m].divToUpdate);n.clientFeatures[e]=u})}function F(e,
h){d.each(n.clientFeatures[h][l.EVENT_TYPE_MOUSEOVER],function(d){try{var n=m("#"+d),l;n.length&&(l=n.attr("customfunctionname"),function(){var d={};d.P=p;(function(){eval("var P \x3d this.P;");eval("0, "+l)(e,DetailPage.StateController)}).call(d)}())}catch(h){x.logFatal("Client feature - "+feature+", threw and exception :- "+h)}})}function G(d){d=n.twisterUtil.getSelectionInfoFromSelectedVariationValuesMap(d.selected_variation_values);n.twisterUtil.isFullySelected(d)?n.currentPageSelectionState=
"full":n.currentPageSelectionState="partial"}var n=this,x=new q("dpTwisterHoverRefreshView");this.twisterUtil=e.util;this.twisterFeatureName="TwisterHover";this.currentPageSelectionState;this.clientFeatures={partial:{},full:{},parent:{},master:{}};n.viewUtil=new r(e);n.subType=void 0;(function(){function m(d){d=n.viewUtil.getCurrDimCombId(d,"_","X");var e=n.twisterUtil.isFullySelected(d)?"full":"partial",l,h=n.currentPageSelectionState;"partial"===h&&"partial"===e&&(l="partial");"partial"===h&&"full"===
e&&(l="full");"full"===h&&"partial"===e&&(l="parent");"full"===h&&"full"===e&&(l="full");e=[l];"parent"===l&&(e=["parent","partial"]);return{clientFeatureToRefresh:e,dimensionCombination:d}}G(h);t();e.registerPassive({viewAttribution:"DetailPageTwister",viewName:"WebTwisterHoverRefreshView"},{updateView:function(e,h){switch(e){case l.VARIATION_PEEK:var p={};e=h.peek().selInfo;p=m(e);d.each(p.clientFeatureToRefresh,function(d){F(p.dimensionCombination,d)});case l.VARIATION_CHANGE:n.subType!==l.PRODUCTIZED_VIEW_SUBTYPE&&
(e=h.selected().selInfo,h=n.viewUtil.getCurrDimCombId(e,"_","X"),n.currentPageSelectionState=n.twisterUtil.isFullySelected(h)?"full":"partial",n.subType=void 0);break;case l.METADATA:switch(h.subType){case l.PRODUCTIZED_VIEW_SUBTYPE:n.subType=h.subType,n.currentPageSelectionState=n.twisterUtil.isFullySelected(h.newDimCombID)?"full":"partial"}}}})})()}})});